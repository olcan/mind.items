<div
  id="todoer-widget-__cid__"
  class="todoer-widget macro __classes__"
  _cache_key="__cid__"
  _skip_invalidation
  __style__
></div>
<!-- to prevent flicker (and item height change) on cache invalidation, we use _skip_invalidation on widget div and move script outside to ensure re-rendering still happens on cache invalidation -->
<script _cached>
  _render_todoer_widget(_this.elem.querySelector('#widget'))
</script>

<style>
  #widget {
    display: flex;
  }
  #widget .list {
    width: 100%;
    /* transition: width 0.1s ease-out; */
  }
  #widget .bin {
    flex-basis: 0;
    flex-grow: 1;
    box-sizing: border-box;
    padding: 0;
    opacity: 0;
    width: 0;
    /* transition: width 0.1s ease-out; */
    /* transition: background-color 1s ease-out; */
  }
  #widget.dragging .list {
    width: 80%;
    margin: 0 10px; /* prevents flickering while dragging across */
  }
  #widget.dragging .bin {
    width: 10%;
    opacity: 0.75;
  }
  #widget.dragging .bin:empty {
    opacity: 0.25;
  }
  #widget .bin.cancel {
    background: #f66;
    border-radius: 0 4px 4px 0;
  }
  #widget .bin.cancel:not(:empty) {
    background: #f33;
  }
  #widget .bin.done {
    background: #6f6;
    border-radius: 4px 0 0 4px;
  }
  #widget .bin.done:not(:empty) {
    background: #3f3;
  }

  #widget .list-item {
    cursor: pointer;
    margin: 3px 0;
    padding: 0 7px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  #widget.dragging .list-item {
    cursor: grabbing;
  }
  #widget .list-item {
    background: #171717;
    border-radius: 5px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 80%;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  #widget .sortable-ghost {
    opacity: 0.25;
  }
  #widget .bin :is(.sortable-ghost, .list-item) {
    display: none;
  }
  #widget .sortable-drag {
    padding-left: 0.5em; /* for .list-item padding-left:-.5em */
  }

  /* __styles__ */
</style>
