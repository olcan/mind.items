<div id="horizontal_bar_chart-__cid__" class="c3 __classes__" __style__>
  <script>
    const { data, options } = _this.store['horizontal_bar_chart-__cid__']
    const { labels, values, baseline } = data
    let change
    if (baseline)
      change = values
        .map((x, i) => x - baseline[i])
        .map(d3.format(options.y_format))

    c3._chart(
      '#horizontal_bar_chart-__cid__',
      merge(
        {
          data: {
            x: 'x',
            columns: [
              ['x', ...labels],
              ...(baseline ? [[options.baseline_label, ...baseline]] : []),
              [options.y_label, ...values],
              ...(change ? [[options.change_label, ...change]] : []),
            ],
            labels: options.labels,
            type: 'bar',
            colors: _.fromPairs([
              [options.y_label, baseline ? '#d61' : 'gray'],
              [options.baseline_label, 'gray'],
              [options.change_label, '#48d'],
            ]),
          },
          bar: { space: 0.25 },
          axis: {
            rotated: true,
            x: { type: 'category' },
            y: { show: false },
          },
          padding: { bottom: 7 }, // also done by _chart
          legend: { show: baseline != undefined, position: 'right' },
        },
        options
      )
    )
  </script>
</div>
