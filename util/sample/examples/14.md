#util/sample/examples/14 Confine [simulation](#util/sim) states to observed (logged) distributions.
```js:js_input

let x = { 
  t: _6am - 10, // longer = better; accumulate to emulate longer sims
  awake: false,
  wake_hours: [],
  sleep_hours: [],
  sleep_lengths: [],
  wake_hour_mean: sample(between(6,10)),
  wake_hour_stdev: sample(between(0,3)),
  sleep_hour_mean: sample(between(-2,3)),
  sleep_hour_stdev: sample(between(0,3)),
}
simulate(x, now(), events)
accumulate( // accumulate weights across samples
  confine(x.wake_hours, logged_wake_hours),
  confine(x.sleep_hours, logged_sleep_hours),
  confine(x.sleep_lengths, logged_sleep_lengths)
)
plot(mean(x.sleep_lengths))
plot(stdev(x.sleep_lengths))
// simulate one more day to plot next event
simulate(assign(x,{events:[]}), now()+1, events)
plot(x.events[0], 'next event')

```
```js:js_removed

const wake_hours = event_log('wake').map(e=>e.th)
const sleep_hours = event_log('sleep').map(e=>e.th)
const sleep_hours_12h = event_log('sleep').map(e=>e.th).map(h=>h>12?h-24:h)
const sleep_lengths = event_log().map((e,j,eJ)=>{
  if (e.keyword == 'wake' && eJ[j+1]?.keyword == 'sleep')
    return (e.t - eJ[j+1].t) * 24
}).filter(defined)
const logged_wake_hours = dist(wake_hours)
const logged_sleep_hours = dist(sleep_hours)
const logged_sleep_lengths = dist(sleep_lengths)
const mean_stdev = xJ =>`${round_to(mean(xJ),2)} Â± ${round_to(stdev(xJ),2)}`
print(`logged wake hours: ${mean_stdev(wake_hours)}`)
print(`logged sleep hours: ${mean_stdev(sleep_hours_12h)}`)
print(`logged sleep lengths: ${mean_stdev(sleep_lengths)}`)

const awake = x => x.awake
const asleep = x => !x.awake
const sleep = ft => _if(awake, ft, x=>{ 
  x.awake=false
  x.sleep_hours.push(x.th)
  x.last_sleep_time = x.t
  x.events?.push('sleep')
  // TODO: try picking a type of day, e.g. 'early' or 'late', that may depend on the day of the week and that affects parameters for the following day
})
const wake = ft => _if(asleep, ft, x=>{
  x.awake=true
  x.wake_hours.push(x.th)
  if (defined(x.last_sleep_time)) 
    x.sleep_lengths.push((x.t - x.last_sleep_time) * 24)
  x.events?.push('wake')
})
const events = name_events(
  () => wake(daily(x=>around(x.wake_hour_mean, x.wake_hour_stdev))),
  () => sleep(daily(x=>around(x.sleep_hour_mean, x.sleep_hour_stdev)))
)

const _sample_options = {
  stats:'mks ess lwr r t',
  max_time:10000,
  max_mks:3,
  table:true,
  plot:true,
  // size:1, // debug
  // sort:true,
  // index:'best', // sample best index
  values:true, // include non-output values
  store:true, // store in global_store
  return:false,
}

```
#_util #_logger