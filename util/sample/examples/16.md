#util/sample/examples/16
```js:js_input

let x = state({
  _params:{ p_heads:  sample(between(0,1)) },
  t:      _6am,
  awake:  false,
  flips:  sample(integer(0,5)),
  heads:  ({flips, p_heads}) => sum(flips, _=>random_binary(p_heads)),
})
simulate(x, _6am + 3, events)
// confine(x.heads, 6)

```
```js:js_removed

// TODO: fix js_input parsing inside comments

// TODO: compute items per day while awake
const user_days = (new Date().getTime() - _user.oldest_item_time) * _1ms
print(_user.items / user_days)

const awake = x => x.awake
const asleep = x => !x.awake
const sleep = ft => _if(awake, ft, x=>x.awake=false)
const wake = ft => _if(asleep, ft, x=>{
  x.awake = true
})
const flip = ft => _if(awake, ft, inc(x=>({
  heads:random_binary(x.p_heads),
  flips:1,
})))
const events = name_events(
  // wake up at 8-10am
  () => wake(daily(within(9,1))),
  // flip coin at noon w/ p_heads
  () => flip(daily(12)),
  // sleep at 1-3am
  () => sleep(daily(within(2,1)))
)

const _sample_options = {
  stats:'mks ess lwr r t',
  max_time:15000,
  table:true,
  plot:true,
  // size:1, // debug
  async:true,
  // workers:navigator.hardwareConcurrency,
}

// ```js
// // TODO: move this to #util/user, and provide an "init" method that can initialize a minimal user state from _user and a minimal process that creates or deletes items using a compound poisson process based on a deletion probability. Provide additional functions that can update or add a birth date parameter and associated 'age' state updated periodically  (e.g. daily, perhaps maintained at daily resolution as well), an 'awake' state and wake-sleep process, 'calories', 'weight', 'etc'... basically allowing "user" object to be extended incrementally ...
// const user_birth_date = 'September 2, 1981'
// ```
// ```js_input
// // user_update({weight:193.8})
// ```
// ```js_removed
// const user_birth_event_time = event_time(new Date(user_birth_date))
// const user_get = () => _this._global_store.user ?? {}
// const user_set = x => _this._global_store.user = x
// const user_assign = (...xJ) => assign(_this._global_store.user ??= {}, ...xJ)
// const user_merge = (...xJ) => merge(_this._global_store.user ??= {}, ...xJ)
// const user_update = x => {
//   x = user_merge(x, {t:now()})
//   x.age = (x.t - user_birth_event_time) / 365.25
//   return x
// }
// ```


```
#_util #_async
